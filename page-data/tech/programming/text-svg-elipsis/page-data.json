{"componentChunkName":"component---src-templates-blog-post-js","path":"/tech/programming/text-svg-elipsis/","result":{"data":{"site":{"siteMetadata":{"title":"KSoonYo Blog"}},"markdownRemark":{"id":"86517986-e932-51e4-930d-ecbadbad5121","excerpt":"TL;DR; svg의  태그에 말줄임표 스타일 속성(ellipsis) 적용이 안된다. 텍스트 전체 길이와 svg의 text 요소 너비를 계산하여 말줄임표 문자를 직접 추가해주면 말줄임표 효과를 적용할 수 있다. 서론 css…","html":"<h1>TL;DR;</h1>\n<ul>\n<li>svg의 <strong><code class=\"language-text\">&lt;text></code></strong> 태그에 말줄임표 스타일 속성(ellipsis) 적용이 안된다.</li>\n<li>텍스트 전체 길이와 svg의 text 요소 너비를 계산하여 말줄임표 문자를 직접 추가해주면 말줄임표 효과를 적용할 수 있다.</li>\n</ul>\n<h1>서론</h1>\n<p>css 속성 중 <strong><code class=\"language-text\">text-overflow</code></strong> 의 <strong><code class=\"language-text\">ellipsis</code></strong> 을 이용하면, 텍스트가 너비를 벗어날 때 간단히 말줄임표 처리를 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ko<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Text Overflow Ellipsis Example<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n      <span class=\"token selector\">.container</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 컨테이너 너비 설정 */</span>\n        <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #ccc<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 경계선 추가 */</span>\n        <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 패딩 추가 */</span>\n        <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 16px<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 글자 크기 설정 */</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token selector\">.ellipsis</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 기본 여백 제거 */</span>\n        <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 넘치는 콘텐츠 숨기기 */</span>\n        <span class=\"token property\">white-space</span><span class=\"token punctuation\">:</span> nowrap<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 텍스트를 한 줄로 제한 */</span>\n        <span class=\"token property\">text-overflow</span><span class=\"token punctuation\">:</span> ellipsis<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 말줄임표를 추가 */</span>\n      <span class=\"token punctuation\">}</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ellipsis<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표\n        표시 텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표 표시\n        텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/8852fd78-caaf-4d7c-ae0f-635198529457/image.png\" alt=\"exmaple_ellipsis\"></p>\n<p>참고) <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow\">https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow</a></p>\n<p>위 코드를 svg의 text 요소를 사용한 것으로 수정하면 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ko<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>SVG Text Ellipsis Example<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n      <span class=\"token selector\">svg</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 컨테이너 너비 설정 */</span>\n        <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 40px<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #ccc<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 경계선 추가 */</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token selector\">text</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 넘치는 콘텐츠 숨기기 */</span>\n        <span class=\"token property\">white-space</span><span class=\"token punctuation\">:</span> nowrap<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 텍스트를 한 줄로 제한 */</span>\n        <span class=\"token property\">text-overflow</span><span class=\"token punctuation\">:</span> ellipsis<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 말줄임표를 추가 */</span>\n      <span class=\"token punctuation\">}</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>text</span> <span class=\"token attr-name\">x</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">font-size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>black<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표\n        표시 텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표 표시\n        텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>text</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>**하지만 svg의 text 요소에는 말줄임표가 적용되지 않습니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/572806a1-e755-4433-8769-a313ee9e0d7b/image.png\" alt=\"bad_example\"></p>\n<p>**svg 태그에 적용할 수 있는 css 속성은 <code class=\"language-text\">span</code>이나 <code class=\"language-text\">div</code> 처럼 일반적인 DOM 요소에 적용할 수 있는 속성과 차이가 있기 때문에 스타일 속성을 그대로 적용할 수 없습니다!</p>\n<blockquote>\n<p>✨ ** svg 요소 별 css 속성 정리표** > <a href=\"https://css-tricks.com/svg-properties-and-css/\">https://css-tricks.com/svg-properties-and-css/</a></p>\n</blockquote>\n<p>그래서 구글에 검색을 해보면 <strong><code class=\"language-text\">&lt;text></code></strong> 요소에 말줄임표 효과를 적용하기 위한 여러 글이 있는 것을 확인할 수 있습니다.</p>\n<p>이번 글에서는 여러 방법 중 하나를 소개해보려고 합니다.\n코드 예시는 Typescript로 작성했습니다.</p>\n<h1>설명</h1>\n<h2>1. 함수 정의 및 매개변수</h2>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">trimTextToFitWidth</span><span class=\"token punctuation\">(</span>\n  textElement<span class=\"token operator\">:</span> SVGTextElement<span class=\"token punctuation\">,</span>\n  maxWidth<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  originText<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>여러 <code class=\"language-text\">&lt;text></code> 요소에 대해 효율적으로 말줄임표 처리를 하기 위해 비동기 함수로 정의했습니다.</li>\n<li><code class=\"language-text\">textElement</code> 가 바로 <code class=\"language-text\">&lt;text></code> 요소를 나타내는 매개변수를 의미합니다.</li>\n<li><code class=\"language-text\">maxWidth</code>는 텍스트가 들어갈 수 있는 최대 너비입니다.</li>\n</ul>\n<h2>2. 변수 초기화</h2>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">let</span> text <span class=\"token operator\">=</span> originText\n<span class=\"token keyword\">const</span> ellipsis <span class=\"token operator\">=</span> <span class=\"token string\">\"···\"</span></code></pre></div>\n<h2>3. 텍스트 너비 체크 함수 정의</h2>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isTooWide</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>str<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  textElement<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> str\n  <span class=\"token keyword\">return</span> textElement<span class=\"token punctuation\">.</span><span class=\"token function\">getComputedTextLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> maxWidth\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">getComputedTextLength()</code> 는 현재 텍스트의 너비를 반환합니다.</li>\n<li>인자로 문자열을 받고 <code class=\"language-text\">textElement</code>의 컨텐츠로 할당 후에 최대 너비를 초과하는지 체크합니다.</li>\n</ul>\n<h2>4.🐱‍🏍(핵심) 이분 탐색을 통한 최적의 텍스트 길이 찾기</h2>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">let</span> start <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">let</span> end <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span>length\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>start <span class=\"token operator\">&lt;</span> end<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>start <span class=\"token operator\">+</span> end<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isTooWide</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> ellipsis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    end <span class=\"token operator\">=</span> mid\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    start <span class=\"token operator\">=</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>가장 핵심인 부분입니다.</p>\n</li>\n<li>\n<p>알고리즘 문제 푸는 것도 아니고 무슨 이분 탐색인가 싶지만 textElement 내에서 최대한 자연스럽게 말줄임 스타일을 적용하기 위한 방법입니다.</p>\n</li>\n<li>\n<p>여기서 수행하는 작업의 핵심은 3가지 입니다.\n(1) 텍스트의 가운데 길이에서 말줄임표 텍스트를 더한 문자열이 최대 너비를 초과하는지 체크합니다.\n(2-1) 초과한다면 <strong>현재 텍스트를 절반으로 자르고, 뒤에 있는 문자열을 모두 버립니다.</strong>(실제 원문 텍스트를 수정하는 것이 아님에 유의!)\n(2-2) 초과하지 않는다면 <strong>최대한 textElement에 긴 텍스트를 쓰기 위해 시작점을 뒤로 하여 텍스트 요소 내의 마지막 끝 문자로 최대한 텍스트 뒤에 있는 문자를 선택</strong>합니다.</p>\n</li>\n</ul>\n<p>그림으로 보면 매우 간단한 아이디어입니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/64944299-422e-47bd-93de-4e8e0f9339cd/image.png\" alt=\"example_1\"></p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/dde07642-96f5-47df-a326-5d3d40345849/image.png\" alt=\"example_2\"></p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/f5a90fba-a535-4b3b-adcf-ef2a00443275/image.png\" alt=\"example_3\"></p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/c0c9f100-64ed-48f2-96e3-05447a1c3e2d/image.png\" alt=\"example_4\"></p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/77812b42-a95b-4eb0-a25b-f9f7efaac115/image.png\" alt=\"example_5\"></p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/e95e4c19-37fa-4429-b5a9-1e622c699c00/image.png\" alt=\"example_6\"></p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/8ca46729-65d1-42ea-b6c7-3157c4235031/image.png\" alt=\"example_7\"></p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/093dc1ed-be86-47f5-a167-d0443d5cca57/image.png\" alt=\"example_8\"></p>\n<h2>5. 최종 텍스트 설정</h2>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">textElement<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> start <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> ellipsis</code></pre></div>\n<h1>전체 코드</h1>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// text에 ellipsis 효과를 주기 위한 함수</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">trimTextToFitWidth</span><span class=\"token punctuation\">(</span>\n  textElement<span class=\"token operator\">:</span> SVGTextElement<span class=\"token punctuation\">,</span>\n  maxWidth<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  originText<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> text <span class=\"token operator\">=</span> originText\n  <span class=\"token keyword\">const</span> ellipsis <span class=\"token operator\">=</span> <span class=\"token string\">\"···\"</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isTooWide</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>str<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    textElement<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> str\n    <span class=\"token keyword\">return</span> textElement<span class=\"token punctuation\">.</span><span class=\"token function\">getComputedTextLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> maxWidth\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 텍스트가 maxWidth를 넘는지 check</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isTooWide</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n\n  <span class=\"token comment\">// maxWidth 이내에 가장 끝 글자를 바이너리 서치로 탐색</span>\n  <span class=\"token keyword\">let</span> start <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> end <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span>length\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>start <span class=\"token operator\">&lt;</span> end<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>start <span class=\"token operator\">+</span> end<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isTooWide</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> ellipsis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      end <span class=\"token operator\">=</span> mid\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      start <span class=\"token operator\">=</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 가장 끝 글자를 지우고 말줄임표 추가</span>\n  textElement<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> start <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> ellipsis\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>적용</h1>\n<p>이제 앞에서 말줄임표가 적용되지 않았던 코드에 적용해보겠습니다.</p>\n<p>html 문서로 나타내기 위해 Typescript는 Javascript로 변환하여 적용하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ko<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>SVG Text Overflow Ellipsis Example<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n      <span class=\"token selector\">svg</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 컨테이너 너비 설정 */</span>\n        <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #ccc<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 경계선 추가 */</span>\n        <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 40px<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 컨테이너 높이 설정 */</span>\n        <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 넘치는 콘텐츠 숨기기 */</span>\n      <span class=\"token punctuation\">}</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>text</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>myText<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">font-size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>black<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>text</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n      <span class=\"token comment\">// text에 ellipsis 효과를 주기 위한 함수</span>\n      <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">trimTextToFitWidth</span><span class=\"token punctuation\">(</span>\n        textElement<span class=\"token punctuation\">,</span>\n        maxWidth<span class=\"token punctuation\">,</span>\n        originText <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n      <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> text <span class=\"token operator\">=</span> originText\n        <span class=\"token keyword\">const</span> ellipsis <span class=\"token operator\">=</span> <span class=\"token string\">\"···\"</span>\n\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isTooWide</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">str</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          textElement<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> str\n          <span class=\"token keyword\">return</span> textElement<span class=\"token punctuation\">.</span><span class=\"token function\">getComputedTextLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> maxWidth\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 텍스트가 maxWidth를 넘는지 check</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isTooWide</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n\n        <span class=\"token comment\">// maxWidth 이내에 가장 끝 글자를 바이너리 서치로 탐색</span>\n        <span class=\"token keyword\">let</span> start <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">let</span> end <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span>length\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>start <span class=\"token operator\">&lt;</span> end<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">let</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>start <span class=\"token operator\">+</span> end<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isTooWide</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> ellipsis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            end <span class=\"token operator\">=</span> mid\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            start <span class=\"token operator\">=</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 가장 끝 글자를 지우고 말줄임표 추가</span>\n        textElement<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> text<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> start <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> ellipsis\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// 텍스트 설정 및 함수 호출</span>\n      <span class=\"token keyword\">const</span> textElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myText\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> originalText <span class=\"token operator\">=</span>\n        <span class=\"token string\">\"말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트말줄임표 표시 텍스트\"</span>\n\n      <span class=\"token comment\">// 최대 너비를 설정하고 함수 호출</span>\n      <span class=\"token keyword\">const</span> maxWidth <span class=\"token operator\">=</span> <span class=\"token number\">200</span> <span class=\"token comment\">// 컨테이너 너비</span>\n      <span class=\"token function\">trimTextToFitWidth</span><span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">,</span> maxWidth<span class=\"token punctuation\">,</span> originalText<span class=\"token punctuation\">)</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>결과</strong></p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/969fe767-a50d-4646-a7f0-ac53ea6abc3b/image.png\" alt=\"svg-text-ellipsis-good-example\"></p>\n<p>물론 **<code class=\"language-text\">ellipsis</code>**를 다른 문자로 변경하는 것도 가능합니다.\n<strong><code class=\"language-text\">trimTextToFitWidth</code></strong> 함수 내에서 **<code class=\"language-text\">ellipsis 변수</code> **초기화하는 부분을 <code class=\"language-text\">'...'</code>로 변경해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> ellipsis <span class=\"token operator\">=</span> <span class=\"token string\">\"...\"</span></code></pre></div>\n<p><strong>결과</strong></p>\n<p><img src=\"https://velog.velcdn.com/images/flashsoon/post/7220d794-6753-4222-ba86-1df7484654c8/image.png\" alt=\"svg-text-ellipsis-good-example-v2\"></p>","frontmatter":{"title":"[Javascript] SVG 태그의 <text>에서 말줄임표 구현하기","date":"October 28, 2024","description":"SVG 태그 <text>에서 말줄임표 구현 방법"}},"previous":null,"next":null},"pageContext":{"id":"86517986-e932-51e4-930d-ecbadbad5121","previousPostId":null,"nextPostId":null}},"staticQueryHashes":["230163734","3589320610","3769722449"],"slicesMap":{}}